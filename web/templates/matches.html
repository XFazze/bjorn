{% extends 'base.html' %}

{% block title %}Matches - Bjorn Bot Dashboard{% endblock %}

{% block content %}
<h1>Matches</h1>
<p class="lead">Browse all matches in the system</p>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Match ID</th>
                <th>Date</th>
                <th>Team 1</th>
                <th>Team 2</th>
                <th>Winner</th>
                <th>MMR Difference</th>
                <th>Details</th>
            </tr>
        </thead>
        <tbody>
            {% for match in matches %}
            <tr>
                <td>{{ match.match_id }}</td>
                <td>{{ match.formatted_date }}</td>
                <td>{{ match.team1_players|join('<br>')|safe }}</td>
                <td>{{ match.team2_players|join('<br>')|safe }}</td>
                <td>Team {{ match.winner }}</td>
                <td>{{ match.mmr_diff }}</td>
                <td>
                    <a href="{{ url_for('match_detail', match_id=match.match_id) }}" class="btn btn-sm btn-primary">View Details</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination -->
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <li class="page-item {{ 'disabled' if page == 1 else '' }}">
            <a class="page-link" href="{{ url_for('matches', page=page-1) if page > 1 else '#' }}">Previous</a>
        </li>
        {% for i in range(1, total_pages + 1) %}
        <li class="page-item {{ 'active' if i == page else '' }}">
            <a class="page-link" href="{{ url_for('matches', page=i) }}">{{ i }}</a>
        </li>
        {% endfor %}
        <li class="page-item {{ 'disabled' if page == total_pages else '' }}">
            <a class="page-link" href="{{ url_for('matches', page=page+1) if page < total_pages else '#' }}">Next</a>
        </li>
    </ul>
</nav>
{% endblock %}
